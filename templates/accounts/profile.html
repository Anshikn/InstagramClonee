{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}

{% block title %}Profile{% endblock %}

{% block content %}
<div class="profile-header">

    <div class="profile-image">
        {% if profile.profile_image %}
            <img src="{{ profile.profile_image.url }}" width="150">
        {% else %}
            <img src="{% static 'images/default-profile.png' %}" width="150">
        {% endif %}
    </div>

    <div class="profile-info">
        <h2>{{ profile.user.username }}</h2>

        <p>
            <strong>{{ profile.user.posts.count }}</strong> posts
            <strong>{{ profile.user.followers.count }}</strong> followers
            <strong>{{ profile.user.following.count }}</strong> following
        </p>

        <p><strong>{{ profile.first_name }} {{ profile.last_name }}</strong></p>
        <p>{{ profile.bio }}</p>

        {% if profile.url %}
            <a href="{{ profile.url }}" target="_blank">{{ profile.url }}</a>
        {% endif %}

        <br><br>

        {% if user != profile.user %}
            <form method="post" action="{% url 'follow-toggle' profile.user.id %}">
                {% csrf_token %}
                {% if user in profile.user.followers.all %}
                    <button type="submit">Unfollow</button>
                {% else %}
                    <button type="submit">Follow</button>
                {% endif %}
            </form>
        {% else %}
            <a href="{% url 'edit_profile' %}">Edit Profile</a>
        {% endif %}
    </div>

</div>
{% endblock %}
